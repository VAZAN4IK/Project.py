from customtkinter import *
from PIL import Image
import os

set_appearance_mode("dark")         # üé® "light" / "dark" / "system"
set_default_color_theme("blue")     # üé® "blue" / "green" / "dark-blue"

class ConnectWindow(CTk):
    def __init__(self):
        super().__init__()

        self.name = None
        self.host = None
        self.port = None

        self.title("Agario")
        self.geometry("320x520")
        self.resizable(False, False)
        self.configure(fg_color="#1e1e2e")     # üé® —Ñ–æ–Ω –≤—Å—å–æ–≥–æ –≤—ñ–∫–Ω–∞

        # –ö–∞—Ä—Ç–∏–Ω–∫–∞ –∑–≤–µ—Ä—Ö—É
        top = CTkFrame(self, fg_color="transparent")
        top.pack(fill="x", pady=10)
        img_path = "logo.png"
        if os.path.exists(img_path):
            top_image = CTkImage(Image.open(img_path), size=(160, 160))
            CTkLabel(top, image=top_image, text="").pack()
        else:
            CTkLabel(top, text="Agario", font=("Comic Sans MS", 28, "bold"),
                     text_color="#e5e9f0").pack(pady=20)

        # –ó–∞–≥–æ–ª–æ–≤–æ–∫
        CTkLabel(
            self, text="Connect to server:",
            font=("Comic Sans MS", 20, "bold"),
            text_color="#e5e9f0"              # üé® –∫–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É
        ).pack(pady=(0, 8))

        # –ü–æ–ª—è –≤–≤–æ–¥—É
        form = CTkFrame(self, fg_color="transparent")
        form.pack(fill="x", padx=20)

        self.name_entry = CTkEntry(
            form, placeholder_text="–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è",
            height=44,
            fg_color="#2e2e3e",               # üé® —Ñ–æ–Ω –ø–æ–ª—è
            text_color="#ffffff",              # üé® –∫–æ–ª—ñ—Ä –≤–≤–µ–¥–µ–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É
            placeholder_text_color="#9aa0a6", # üé® –∫–æ–ª—ñ—Ä –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞
            border_color="#5e81ac",           # üé® –∫–æ–ª—ñ—Ä —Ä–∞–º–∫–∏
            corner_radius=10
        )
        self.name_entry.pack(fill="x", pady=8)

        self.host_entry = CTkEntry(
            form, placeholder_text="–í–≤–µ–¥—ñ—Ç—å —Ö–æ—Å—Ç",
            height=44,
            fg_color="#2e2e3e",
            text_color="#ffffff",
            placeholder_text_color="#9aa0a6",
            border_color="#5e81ac",
            corner_radius=10
        )
        self.host_entry.pack(fill="x", pady=8)

        self.port_entry = CTkEntry(
            form, placeholder_text="–í–≤–µ–¥—ñ—Ç—å –ø–æ—Ä—Ç",
            height=44,
            fg_color="#2e2e3e",
            text_color="#ffffff",
            placeholder_text_color="#9aa0a6",
            border_color="#5e81ac",
            corner_radius=10
        )
        self.port_entry.pack(fill="x", pady=8)

        # –ó–∞–ø–æ–≤–Ω—é—î–º–æ –¥–µ—Ñ–æ–ª—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
        self.name_entry.insert(0, "Player")
        self.host_entry.insert(0, "localhost")  # –¥–µ—Ñ–æ–ª—Ç host
        self.port_entry.insert(0, "8080")       # –¥–µ—Ñ–æ–ª—Ç port

        # –ö–Ω–æ–ø–∫–∞ Join
        CTkButton(
            self, text="Join", height=48,
            fg_color="#5e81ac",               # üé® —Ñ–æ–Ω –∫–Ω–æ–ø–∫–∏
            hover_color="#81a1c1",            # üé® —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ
            text_color="#ffffff",              # üé® –∫–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É –∫–Ω–æ–ø–∫–∏
            command=self.open_game
        ).pack(fill="x", padx=20, pady=10)

        # Enter -> Join
        self.bind("<Return>", lambda _e: self.open_game())

    def open_game(self):
        self.name = self.name_entry.get().strip() or "Player"
        self.host = self.host_entry.get().strip() or "localhost"
        self.port = int(self.port_entry.get().strip() or 8080)
        self.destroy()


# –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø—É—Å–∫—É –æ–∫—Ä–µ–º–æ
if __name__ == "__main__":
    win = ConnectWindow()
    win.mainloop()
    print("Name:", win.name)
    print("Host:", win.host)
    print("Port:", win.port)
